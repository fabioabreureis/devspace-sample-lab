schemaVersion: 2.2.0
metadata:
  name: kubedock-java-demo

components:
  - name: dev
    container:
      image: eclipse-temurin:17
      memoryLimit: "2Gi"
      cpuLimit: "1"
      env:
        - name: DOCKER_HOST
          value: "tcp://localhost:2475"
        - name: TESTCONTAINERS_RYUK_DISABLED
          value: "true"
        - name: TESTCONTAINERS_CHECKS_DISABLE
          value: "true"
        - name: TESTCONTAINERS_HOST_OVERRIDE
          value: "localhost"

  - name: kubedock
    container:
      image: joyrex2001/kubedock:0.20.3
      memoryLimit: "512Mi"
      cpuLimit: "500m"
      args:
        - server
        - --address
        - 0.0.0.0:2475
        - --unprivileged
        - --backend
        - kubernetes
